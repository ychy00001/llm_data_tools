import chardet
import sys

sys.path.append("../..")
from common.logger import Logger

log = Logger('test_decode.log', level='debug')

def test_pass():
    aaa = "sss"
    print("我是pass")
    print(f"{aaa[:500]}")

base_dir = "/data/project/llm_data_tools/data/baidu_baike_self/done_baike2023-04-04_15-58-57.jsonl"
if __name__ == '__main__':
    s = b'"\xe5\xbc\x82\xe4\xb8\x99\xe8\x8b\xaf\xef\xbc\x8c\xe5\x8f\x88\xe5\x90\x8d\xe6\x9e\xaf\xe7\x83\xaf\xef\xbc\x8c\xe6\x98\xaf\xe4\xb8\x80\xe7\xa7\x8d\xe6\x9c\x89\xe6\x9c\xba\xe5\x8c\x96\xe5\x90\x88\xe7\x89\xa9\xef\xbc\x8c\xe5\x8c\x96\xe5\xad\xa6\xe5\xbc\x8f\xe4\xb8\xbaC9H12\xef\xbc\x8c\xe4\xb8\xba\xe6\x97\xa0\xe8\x89\xb2\xe6\xb6\xb2\xe4\xbd\x93\xef\xbc\x8c\xe4\xb8\x8d\xe6\xba\xb6\xe4\xba\x8e\xe6\xb0\xb4\xef\xbc\x8c\xe6\xba\xb6\xe4\xba\x8e\xe4\xb9\x99\xe9\x86\x87\xe3\x80\x81\xe4\xb9\x99\xe9\x86\x9a\xe3\x80\x81\xe8\x8b\xaf\xe3\x80\x81\xe5\x9b\x9b\xe6\xb0\xaf\xe5\x8c\x96\xe7\xa2\xb3\xe3\x80\x81\xe4\xb8\x99\xe9\x85\xae\xe7\xad\x89\xe5\xa4\x9a\xe6\x95\xb0\xe6\x9c\x89\xe6\x9c\xba\xe6\xba\xb6\xe5\x89\x82\xef\xbc\x8c\xe4\xb8\xbb\xe8\xa6\x81'
    s1 = "\"异丙苯，又名枯烯，是一种有机化合物，化学式为C9H12，为无色液体，不溶于水，溶于乙醇、乙醚、苯、四氯化碳、丙酮等多数有机溶剂，主要"
    print(chardet.detect(s))
    print(s.decode('utf8'))
    print(type(s))
    print(f"{s1[:17]}")

    for item_line in open(base_dir, 'r', encoding="utf8"):
        log.logger.warning(f"测试decode：{item_line[:17]}")
        break

    test_pass()
